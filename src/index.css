@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    /* Strict Color System - Core */
    --color-primary: #1F2645;
    --color-accent: #E55625;
    --color-accent-hover: #D14A1F;
    --color-accent-light: #F37B4D;
    --color-secondary: #4CAF50;
    --color-success: #4CAF50;
    
    /* Backgrounds */
    --color-background: #FFFFFF;
    --color-background-alt: #F5F7FA;
    --color-surface: #FFFFFF;
    --color-surface-hover: rgba(0, 0, 0, 0.04);
    --color-surface-overlay: rgba(255, 255, 255, 0.95);
    --color-surface-overlay-mobile: rgba(255, 255, 255, 0.98);
    
    /* Text Hierarchy */
    --color-text-primary: #1F2645;
    --color-text-secondary: rgba(31, 38, 69, 0.7);
    --color-text-muted: rgba(31, 38, 69, 0.5);
    
    /* Borders */
    --color-border: rgba(31, 38, 69, 0.12);
    
    /* Brand Teal */
    --color-teal: #14B8A6;
    --color-teal-pale: #CCF7ED;
    --color-teal-subtle: #F0FDFA;
    
    /* Legacy aliases for backward compatibility */
    --color-primary-dark: #1F2645;
    --color-accent-orange: #E55625;
    --color-success-green: #4CAF50;
    --color-headline-blue: #1F2645;
    --color-headline-orange: #E55625;
  }

  .dark {
    color-scheme: dark;

    /* Strict Color System - Core */
    --color-primary: #E8EAF0;
    --color-accent: #FF6B3D;
    --color-accent-hover: #FF7A4F;
    --color-accent-light: #FFA07A;
    --color-secondary: #66BB6A;
    --color-success: #66BB6A;
    
    /* Backgrounds */
    --color-background: #0F1419;
    --color-background-alt: #1A1F2E;
    --color-surface: #1A1F2E;
    --color-surface-hover: rgba(255, 255, 255, 0.06);
    --color-surface-overlay: rgba(15, 20, 25, 0.95);
    --color-surface-overlay-mobile: rgba(15, 20, 25, 0.98);

    /* Text Hierarchy */
    --color-text-primary: #E8EAF0;
    --color-text-secondary: rgba(232, 234, 240, 0.7);
    --color-text-muted: rgba(232, 234, 240, 0.5);
    
    /* Borders */
    --color-border: rgba(232, 234, 240, 0.12);
    
    /* Brand Teal */
    --color-teal: #14B8A6;
    --color-teal-pale: #042F2E;
    --color-teal-subtle: #042F2E;
    
    /* Legacy aliases for backward compatibility */
    --color-primary-dark: #E8EAF0;
    --color-accent-orange: #FF6B3D;
    --color-success-green: #66BB6A;
    --color-headline-blue: #E8EAF0;
    --color-headline-orange: #FF6B3D;
  }

  html,
  body {
    height: 100%;
    overflow-x: hidden;
    scroll-behavior: smooth;
  }

  /* Smooth theme transitions */
  *,
  *::before,
  *::after {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: 0.2s;
    transition-timing-function: ease-in-out;
  }

  /* Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      transition-duration: 0.01ms !important;
      animation-duration: 0.01ms !important;
    }
  }

  /* Prevent transitions on page load */
  .preload * {
    transition: none !important;
  }

  body {
    @apply bg-background text-text-primary font-sans;
    font-size: 16px;
    line-height: 1.6;
  }

  /* Mobile-first: 16px base */
  @media (min-width: 768px) {
    body {
      font-size: 17px;
    }
  }

  @media (min-width: 1024px) {
    body {
      font-size: 18px;
    }
  }

  ::selection {
    background: rgba(229, 86, 37, 0.15);
    color: var(--color-primary-dark);
  }

  .dark ::selection {
    background: rgba(255, 107, 61, 0.25);
  }

  a {
    @apply text-text-primary;
  }

  a:focus-visible,
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: 3px solid rgba(229, 86, 37, 0.4);
    outline-offset: 3px;
    border-radius: 6px;
  }
}

@layer components {
  /* Mobile-first Typography System */
  .text-responsive-sm {
    font-size: clamp(0.875rem, 0.8rem + 0.25vw, 1rem);
  }
  
  .text-responsive-base {
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
  }
  
  .text-responsive-lg {
    font-size: clamp(1.125rem, 1rem + 0.5vw, 1.25rem);
  }

  /* Headline color accents */
  .headline-blue {
    color: var(--color-headline-blue);
  }
  
  .headline-orange {
    color: var(--color-headline-orange);
  }

  /* Mobile-first container with responsive padding */
  .container-x {
    @apply mx-auto w-full px-4 sm:px-6 md:px-8 lg:px-10;
    max-width: 90rem; /* 1440px */
  }

  @media (min-width: 640px) {
    .container-x {
      max-width: 640px;
    }
  }

  @media (min-width: 768px) {
    .container-x {
      max-width: 768px;
    }
  }

  @media (min-width: 1024px) {
    .container-x {
      max-width: 1024px;
    }
  }

  @media (min-width: 1280px) {
    .container-x {
      max-width: 1280px;
    }
  }

  @media (min-width: 1536px) {
    .container-x {
      max-width: 1440px;
    }
  }

  .eyebrow {
    @apply text-xs font-medium uppercase tracking-[0.18em] text-text-secondary;
    font-size: clamp(0.625rem, 0.6rem + 0.15vw, 0.75rem);
  }

  /* Fluid typography for display headings - Mobile first */
  .h-display {
    @apply font-display tracking-tightish text-primary-dark;
    font-size: clamp(2rem, 1.5rem + 2vw, 3.5rem);
    line-height: 1.05;
  }

  /* Responsive paragraph lead text */
  .p-lede {
    @apply leading-relaxed text-text-secondary;
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
  }

  /* Primary CTA Button - Accent Orange - Mobile-first with min touch target */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl2 border-0 bg-accent px-5 py-3 text-sm font-medium tracking-wideish text-white shadow-sm transition-all duration-300;
    min-height: 44px; /* WCAG touch target minimum */
    min-width: 44px;
  }

  .btn:hover {
    @apply shadow-liftSm bg-accent-hover;
    transform: translateY(-2px);
  }

  .btn:active {
    transform: translateY(0px) scale(0.98);
  }

  @media (min-width: 768px) {
    .btn {
      @apply px-6 py-3.5 text-base;
    }
  }

  /* Ghost Button - Theme-aware */
  .btn--ghost {
    @apply border border-text-primary bg-transparent text-text-primary;
    min-height: 44px;
    min-width: 44px;
  }

  .btn--ghost:hover {
    @apply bg-text-primary text-background;
  }

  /* Responsive Grid Patterns */
  .grid-responsive-cards {
    @apply grid gap-4 sm:gap-6 md:gap-8;
    /* Mobile: 2 columns */
    grid-template-columns: repeat(2, 1fr);
  }

  @media (min-width: 768px) {
    .grid-responsive-cards {
      /* Tablet: 2-3 columns */
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .grid-responsive-cards {
      /* Desktop: 3-4 columns */
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (min-width: 1280px) {
    .grid-responsive-cards {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* Modern Card Component */
  .card {
    @apply bg-surface rounded-2xl shadow-sm border border-border transition-all duration-300;
    overflow: hidden;
  }

  .dark .card {
    background-color: #1A1F2E;
  }

  .card:hover {
    @apply shadow-lift;
    transform: translateY(-4px);
  }

  /* Glass morphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .dark .glass {
    background: rgba(26, 31, 46, 0.9);
    border: 1px solid rgba(232, 234, 240, 0.1);
  }

  /* Responsive spacing scale */
  .section-spacing {
    @apply py-12 sm:py-16 md:py-20 lg:py-24 xl:py-28;
  }

  .content-spacing {
    @apply space-y-6 sm:space-y-8 md:space-y-10 lg:space-y-12;
  }

  /* Success Button */
  .btn--success {
    @apply border-0 bg-success text-white;
  }

  .btn--success:hover {
    @apply bg-success-dark;
  }

  .card {
    @apply rounded-xl2 border border-border bg-surface shadow-sm transition;
  }

  /* Duplicate .dark .card removed - see above */

  .btn-nav {
    @apply border border-accent bg-transparent text-accent;
  }

  .btn-nav:hover {
    @apply bg-accent text-white;
  }

  .card:hover {
    @apply shadow-liftSm;
    transform: translateY(-4px);
  }

  .underline-anim {
    position: relative;
    text-decoration: none;
  }

  .underline-anim::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    height: 1px;
    width: 100%;
    background: currentColor;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 180ms ease-out;
    opacity: 0.6;
  }

  .underline-anim:hover::after,
  .underline-anim:focus-visible::after {
    transform: scaleX(1);
  }

  /* Alert/Message Components */
  .alert-success {
    @apply border border-success bg-success/10 text-success-dark p-4 rounded-lg;
  }

  .alert-info {
    @apply border border-accent bg-accent/10 text-accent p-4 rounded-lg;
  }
}

/* Animations */
@keyframes zoomIn {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.1);
  }
}

.animate-zoom-in {
  animation: zoomIn 20s ease-in-out infinite alternate;
}
